!function(e){var t={speed:0,interaction:!0,size:2,count:200,opacity:0,color:"#ffffff",windPower:0,image:!1};e.fn.let_it_snow=function(i){function a(){s.clearRect(0,0,h.width,h.height);for(var t=0;t<l;t++){var i=d[t],r=w,f=m,c=i.x,M=i.y,v=Math.sqrt((c-r)*(c-r)+(M-f)*(M-f));if(v<100){var y=100/(v*v),p=(r-c)/v,u=(f-M)/v,g=y/2;i.velX-=g*p,i.velY-=g*u}else switch(i.velX*=.98,i.velY<=i.speed&&(i.velY=i.speed),n.windPower){case!1:case 0:i.velX+=Math.cos(i.step+=.05)*i.stepSize;break;default:i.velX+=.01+n.windPower/100}var A=n.color,z=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/,x=z.exec(A),F=parseInt(x[1],16)+","+parseInt(x[2],16)+","+parseInt(x[3],16);i.y+=i.velY,i.x+=i.velX,(i.y>=h.height||i.y<=0)&&o(i),(i.x>=h.width||i.x<=0)&&o(i),0==n.image?(s.fillStyle="rgba("+F+","+i.opacity+")",s.beginPath(),s.arc(i.x,i.y,i.size,0,2*Math.PI),s.fill()):s.drawImage(e("img#lis_flake").get(0),i.x,i.y,2*i.size,2*i.size)}requestAnimationFrame(a)}function o(e){if(0==n.windPower||0==n.windPower)e.x=Math.floor(Math.random()*h.width),e.y=0;else if(n.windPower>0){var t=Array(Math.floor(Math.random()*h.width),0),i=Array(0,Math.floor(Math.random()*h.height)),a=Array(t,i),o=a[Math.floor(Math.random()*a.length)];e.x=o[0],e.y=o[1]}else{var t=Array(Math.floor(Math.random()*h.width),0),i=Array(h.width,Math.floor(Math.random()*h.height)),a=Array(t,i),o=a[Math.floor(Math.random()*a.length)];e.x=o[0],e.y=o[1]}e.size=3*Math.random()+n.size,e.speed=1*Math.random()+n.speed,e.velY=e.speed,e.velX=0,e.opacity=.5*Math.random()+n.opacity}var n=e.extend({},t,i),r=e(this),d=[],h=r.get(0),s=h.getContext("2d"),l=n.count,w=-100,m=-100;h.width=window.innerWidth,h.height=window.innerHeight,function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};window.requestAnimationFrame=e}(),0!=n.image&&e("<img src='"+n.image+"' style='display: none' id='lis_flake'>").prependTo("body"),function(){for(var e=0;e<l;e++){var t=Math.floor(Math.random()*h.width),i=Math.floor(Math.random()*h.height),o=3*Math.random()+n.size,r=1*Math.random()+n.speed,s=.5*Math.random()+n.opacity;d.push({speed:r,velY:r,velX:0,x:t,y:i,size:o,stepSize:Math.random()/30,step:0,angle:180,opacity:s})}a()}(),e(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){el2=r.clone(),el2.insertAfter(r),r.remove(),el2.let_it_snow(n)},200)}),1==n.interaction&&h.addEventListener("mousemove",function(e){w=e.clientX,m=e.clientY})}}(window.jQuery);